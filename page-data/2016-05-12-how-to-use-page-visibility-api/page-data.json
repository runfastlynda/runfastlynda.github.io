{"componentChunkName":"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js","path":"/2016-05-12-how-to-use-page-visibility-api/","result":{"data":{"site":{"siteMetadata":{"title":"runfastlynda","social":[{"name":"twitter","url":"https://twitter.com/runfastlynda"},{"name":"github","url":"https://github.com/runfastlynda"}]}},"blogPost":{"__typename":"MdxBlogPost","id":"4149d3c1-9c94-5e9b-9ae3-34c70a80a32d","excerpt":"Page Visibility API是HTML5中简单又实用的API之一。 不知道用户是不是在与页面交互，这是困扰广大Web开发人员的一个主要问题。如果页面最小化了或者隐藏在了其他标签页后面，那么有些功能是可以停下来的，比如轮询服务器或者某些动画效果。那么如何判断呢？ H…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"date\": \"2016-05-12T00:00:00.000Z\",\n  \"title\": \"活学活用页面可见性\",\n  \"categories\": [\"javascript\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Page Visibility API\\u662FHTML5\\u4E2D\\u7B80\\u5355\\u53C8\\u5B9E\\u7528\\u7684API\\u4E4B\\u4E00\\u3002\"), mdx(\"p\", null, \"\\u4E0D\\u77E5\\u9053\\u7528\\u6237\\u662F\\u4E0D\\u662F\\u5728\\u4E0E\\u9875\\u9762\\u4EA4\\u4E92\\uFF0C\\u8FD9\\u662F\\u56F0\\u6270\\u5E7F\\u5927Web\\u5F00\\u53D1\\u4EBA\\u5458\\u7684\\u4E00\\u4E2A\\u4E3B\\u8981\\u95EE\\u9898\\u3002\\u5982\\u679C\\u9875\\u9762\\u6700\\u5C0F\\u5316\\u4E86\\u6216\\u8005\\u9690\\u85CF\\u5728\\u4E86\\u5176\\u4ED6\\u6807\\u7B7E\\u9875\\u540E\\u9762\\uFF0C\\u90A3\\u4E48\\u6709\\u4E9B\\u529F\\u80FD\\u662F\\u53EF\\u4EE5\\u505C\\u4E0B\\u6765\\u7684\\uFF0C\\u6BD4\\u5982\\u8F6E\\u8BE2\\u670D\\u52A1\\u5668\\u6216\\u8005\\u67D0\\u4E9B\\u52A8\\u753B\\u6548\\u679C\\u3002\\u90A3\\u4E48\\u5982\\u4F55\\u5224\\u65AD\\u5462\\uFF1F\"), mdx(\"p\", null, \"H5\\u4E4B\\u524D\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u76D1\\u542Confocus()\\u4E8B\\u4EF6\\u3002\\u5982\\u679C\\u5F53\\u524D\\u7A97\\u53E3\\u5F97\\u5230\\u7126\\u70B9\\uFF0C\\u90A3\\u4E48\\u6211\\u4EEC\\u53EF\\u4EE5\\u7B80\\u5355\\u8BA4\\u4E3A\\u7528\\u6237\\u5728\\u4E0E\\u8BE5\\u9875\\u9762\\u4EA4\\u4E92\\uFF0C\\u5982\\u679C\\u5931\\u53BB\\u7126\\u70B9\\uFF08onblur()\\uFF09\\uFF0C\\u90A3\\u4E48\\u53EF\\u4EE5\\u8BA4\\u4E3A\\u7528\\u6237\\u505C\\u6B62\\u4E0E\\u8BE5\\u9875\\u9762\\u4EA4\\u4E92\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    \"parentName\": \"pre\"\n  }, \"// \\u5F53\\u524D\\u7A97\\u53E3\\u5F97\\u5230\\u7126\\u70B9\\nwindow.onfocus = function() {\\n  // \\u52A8\\u753B\\u5F00\\u59CB\\n};\\n\\n// \\u5F53\\u524D\\u7A97\\u53E3\\u5931\\u53BB\\u7126\\u70B9\\nwindow.onblur = function() {\\n  // \\u505C\\u6B62\\u52A8\\u753B\\n};\\n\")), mdx(\"p\", null, \"\\u4F46\\u662F\\u8FD9\\u6837\\u7684\\u65B9\\u6CD5\\u663E\\u7136\\u662F\\u5F88 \\u201C\\u7C97\\u7CD9\\u201D \\u7684\\u3002\\u6D4F\\u89C8\\u5668\\u5931\\u53BB\\u7126\\u70B9\\uFF0C\\u4E0D\\u610F\\u5473\\u7740\\u7528\\u6237\\u6CA1\\u5728\\u4E0E\\u9875\\u9762\\u4EA4\\u4E92\\uFF0CH5\\u5F15\\u5165\\u7684Page Visibility API\\uFF0C\\u80FD\\u5F88\\u6709\\u6548\\u5730\\u5E2E\\u52A9\\u6211\\u4EEC\\u5B8C\\u6210\\u8FD9\\u6837\\u7684\\u5224\\u65AD\\u3002\"), mdx(\"p\", null, \"\\u8FD9\\u4E2AAPI\\u672C\\u8EAB\\u975E\\u5E38\\u7B80\\u5355\\uFF0C\\u7531\\u4EE5\\u4E0B\\u4E09\\u90E8\\u5206\\u7EC4\\u6210\\u3002\"), mdx(\"p\", null, \"document.hidden\\uFF1A\\u8868\\u793A\\u9875\\u9762\\u662F\\u5426\\u9690\\u85CF\\u7684\\u5E03\\u5C14\\u503C\\u3002\\u9875\\u9762\\u9690\\u85CF\\u5305\\u62EC \\u9875\\u9762\\u5728\\u540E\\u53F0\\u6807\\u7B7E\\u9875\\u4E2D \\u6216\\u8005 \\u6D4F\\u89C8\\u5668\\u6700\\u5C0F\\u5316\\uFF08\\u6CE8\\u610F\\uFF0C\\u9875\\u9762\\u88AB\\u5176\\u4ED6\\u8F6F\\u4EF6\\u906E\\u76D6\\u5E76\\u4E0D\\u7B97\\u9690\\u85CF\\uFF0C\\u6BD4\\u5982\\u6253\\u5F00\\u7684 sublime \\u906E\\u4F4F\\u4E86\\u6D4F\\u89C8\\u5668\\uFF09\"), mdx(\"p\", null, \"document.visibilityState\\uFF1A\\u8868\\u793A\\u4E0B\\u9762 4 \\u4E2A\\u53EF\\u80FD\\u72B6\\u6001\\u7684\\u503C\"), mdx(\"ul\", null, mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, \"hidden\\uFF1A\\u9875\\u9762\\u5728\\u540E\\u53F0\\u6807\\u7B7E\\u9875\\u4E2D\\u6216\\u8005\\u6D4F\\u89C8\\u5668\\u6700\\u5C0F\\u5316\"), mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, \"visible\\uFF1A\\u9875\\u9762\\u5728\\u524D\\u53F0\\u6807\\u7B7E\\u9875\\u4E2D\"), mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, \"prerender\\uFF1A\\u9875\\u9762\\u5728\\u5C4F\\u5E55\\u5916\\u6267\\u884C\\u9884\\u6E32\\u67D3\\u5904\\u7406 document.hidden \\u7684\\u503C\\u4E3A true\"), mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, \"unloaded\\uFF1A\\u9875\\u9762\\u6B63\\u5728\\u4ECE\\u5185\\u5B58\\u4E2D\\u5378\\u8F7D\")), mdx(\"p\", null, \"Visibilitychange\\u4E8B\\u4EF6\\uFF1A\\u5F53\\u6587\\u6863\\u4ECE\\u53EF\\u89C1\\u53D8\\u4E3A\\u4E0D\\u53EF\\u89C1\\u6216\\u8005\\u4ECE\\u4E0D\\u53EF\\u89C1\\u53D8\\u4E3A\\u53EF\\u89C1\\u65F6\\uFF0C\\u4F1A\\u89E6\\u53D1\\u8BE5\\u4E8B\\u4EF6\\u3002\"), mdx(\"p\", null, \"\\u8FD9\\u6837\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u76D1\\u542CVisibilitychange\\u4E8B\\u4EF6\\uFF0C\\u5F53\\u8BE5\\u4E8B\\u4EF6\\u89E6\\u53D1\\u65F6\\uFF0C\\u83B7\\u53D6document.hidden\\u7684\\u503C\\uFF0C\\u6839\\u636E\\u8BE5\\u503C\\u8FDB\\u884C\\u9875\\u9762\\u4E00\\u4E9B\\u4E8B\\u4EF6\\u7684\\u5904\\u7406\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    \"parentName\": \"pre\"\n  }, \"document.addEventListener('visibilitychange', function() {\\n  var isHidden = document.hidden;\\n  if (isHidden) {\\n    // \\u52A8\\u753B\\u505C\\u6B62\\n  } else {\\n    // \\u52A8\\u753B\\u5F00\\u59CB\\n  }\\n});\\n\")), mdx(\"h3\", {\n    \"id\": \"实际运用：\"\n  }, \"\\u5B9E\\u9645\\u8FD0\\u7528\\uFF1A\"), mdx(\"p\", null, \"\\u4E0B\\u9762\\u662F\\u4E00\\u4E2A\\u6839\\u636E\\u9875\\u9762\\u53EF\\u89C1\\u6027\\u66F4\\u6539title\\u7684\\u4F8B\\u5B50\\uFF0C\\u7279\\u522B\\u6709\\u8DA3\\uFF0C\\u5B9E\\u73B0\\u6548\\u679C\\u5982\\u4E0B\\uFF1A\"), mdx(\"p\", null, \"\\u5F53\\u6211\\u9009\\u62E9\\u5176\\u4ED6tag\\u65F6\\uFF0C\\u5B83\\u7684title\\u663E\\u793A\\u4E3A\\u5982\\u4E0B\\uFF1A\"), mdx(\"p\", null, mdx(\"img\", {\n    \"src\": \"../../../../img/page2.png\",\n    \"parentName\": \"p\"\n  })), mdx(\"p\", null, \"\\u5F53\\u6211\\u9009\\u62E9\\u5F53\\u524D\\u9875\\u9762\\uFF0C\\u5B83\\u7684title\\u663E\\u793A\\u5982\\u4E0B\\uFF1A\"), mdx(\"p\", null, mdx(\"img\", {\n    \"src\": \"../../../../img/page1.png\",\n    \"parentName\": \"p\"\n  })), mdx(\"p\", null, \"\\u5E9F\\u8BDD\\u4E0D\\u8BF4\\uFF0C\\u76F4\\u63A5\\u4E0A\\u4EE3\\u7801\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    \"parentName\": \"pre\"\n  }, \"//\\u8003\\u8651\\u4E86\\u517C\\u5BB9\\u6027\\nvar glb = {\\n  d: document,\\n  addEvent: function(a, b, c, d) {\\n    if (a.addEventListener) {\\n      a.addEventListener(b, c, d)\\n    } else if (a.attachEvent) {\\n      a.attachEvent('on' + b, c)\\n    }\\n  },\\n  delEvent: function(a, b, c, d) {\\n    if (a.removeEventListener) {\\n      a.removeEventListener(b, c, d)\\n    } else if (a.detachEvent) {\\n      a.detachEvent('on' + b, c)\\n    }\\n  }\\n};\\nglb.stateEvent = function() {\\n  if (glb.d.visibilityState == 'prerender') {\\n    glb.d.title = '\\u9884\\u6E32\\u67D3\\u4E2D....';\\n  }\\n  if (glb.d.visibilityState == 'visible') {\\n    glb.d.title = '\\u4F60\\u53EF\\u4EE5\\u770B\\u5230\\u6211\\u54E6~';\\n  }\\n  if (glb.d.visibilityState == 'hidden') {\\n    glb.d.title = '\\u4F60\\u770B\\u4E0D\\u5230\\u6211\\u4E86!';\\n  };\\n}\\nglb.stateEvent();\\nglb.addEvent(glb.d, 'visibilitychange', glb.stateEvent, false);\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"/2016-05-12-how-to-use-page-visibility-api/","title":"活学活用页面可见性","tags":[],"keywords":[],"date":"May 12, 2016","image":null,"imageAlt":null,"socialImage":null},"previous":{"__typename":"MdxBlogPost","id":"1bcb2c12-0f63-59de-a146-3d914bd11bf2","excerpt":"如何实现梯形？ 利用边框我们可以得到梯形，首先我们给一个div添加边框，当给边框设置四个不同的颜色时，我们可以得到这样的样式，可以看到这里上边框是一个梯形，那么如果我们给其他边框设置颜色为透明(transparent…","slug":"/2016-03-12-use-border-make-triangle/","title":"巧用border实现梯形和三角形","date":"March 12, 2016"},"next":{"__typename":"MdxBlogPost","id":"398cdd52-cdb4-5676-a9db-1153942a6272","excerpt":"很多人都推荐使用HTML5 Boilerplate作为项目的默认模板，所以周末特意花了些时间研究了一下。使用方法本文就不赘述了，主要是阅读源码，补充自己的不足。 目录结构 结构就是如此，简单概括一下： 404.html 、 index.html 页面不用多说什么 css…","slug":"/2016-07-04-read-html5-boilerplate/","title":"读源码：HTML5 Boilerplate","date":"July 04, 2016"}},"pageContext":{"id":"4149d3c1-9c94-5e9b-9ae3-34c70a80a32d","previousId":"1bcb2c12-0f63-59de-a146-3d914bd11bf2","nextId":"398cdd52-cdb4-5676-a9db-1153942a6272"}},"staticQueryHashes":["386998304","4198970465","764694655"]}