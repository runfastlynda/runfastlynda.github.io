{"componentChunkName":"component---src-templates-blog-post-js","path":"/2015-10-02-add-duoting-for-jekyll/","result":{"data":{"site":{"siteMetadata":{"title":"runfastlynda👀"}},"markdownRemark":{"id":"c69cf6e1-330f-59f8-9685-5d8fe9d0a9b3","excerpt":"…","html":"<h3>准备</h3>\n<p>我使用的是多说，所以第一步是登陆多说首页，先登陆账号，把你想使用的账号授权给多说便可。</p>\n<p>首页大大按钮<code class=\"language-text\">我要安装</code>，点击之后，填写创建站点页面，填好相关信息后你会看到生成的默认代码了。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 多说评论框 start --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ds-thread<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-thread-key</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>请将此处替换成文章在你的站点中的ID<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-title</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>请替换成文章的标题<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-url</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>请替换成文章的网址<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!-- 多说评论框 end --></span>\n<span class=\"token comment\">&lt;!-- 多说公共JS代码 start (一个网页只需插入一次) --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">var</span> duoshuoQuery <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>short_name<span class=\"token operator\">:</span><span class=\"token string\">\"short_name\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> ds <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        ds<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'text/javascript'</span><span class=\"token punctuation\">;</span>ds<span class=\"token punctuation\">.</span>async <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        ds<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>protocol <span class=\"token operator\">==</span> <span class=\"token string\">'https:'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'https:'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'http:'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'//static.duoshuo.com/embed.js'</span><span class=\"token punctuation\">;</span>\n        ds<span class=\"token punctuation\">.</span>charset <span class=\"token operator\">=</span> <span class=\"token string\">'UTF-8'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'head'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n         <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!-- 多说公共JS代码 end --></span></code></pre></div>\n<p>看到这段代码先不要动手，我们有两张方法可以配置。</p>\n<h3>配置方法一</h3>\n<h4>复制代码</h4>\n<p>复制多说提供的代码到<code class=\"language-text\">post.html</code>的文章内容之后，粘贴好代码后，需要把站点的文章标题、网址等参数替换掉默认内容。</p>\n<h4>配置对应的文件</h4>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>comments<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ds-thread<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">{%</span> <span class=\"token attr-name\">if</span> <span class=\"token attr-name\">page.id</span> <span class=\"token attr-name\">%}data-thread-key</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{{ page.id }}<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">{%</span> <span class=\"token attr-name\">endif</span> <span class=\"token attr-name\">%}</span>  <span class=\"token attr-name\">data-title</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>将多说提供的代码中需要自己添加的部分，配置成上面的代码，工作做完之后，访问页面我们的博客就得到评论功能了。</p>\n<h3>配置方法二</h3>\n<p>当前的配制方法是将代码与页面分离，将评论看做组成页面的元素之一，而不写死在页面模板中，需要时调用相应内容即可。</p>\n<h4>修改 <code class=\"language-text\">_config.yml</code></h4>\n<p>首先看 <code class=\"language-text\">_config.yml</code> ，需要在 comments 下加入评论插件标识</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">comments :\n    provider : duoshuo\n    duoshuo :\n      short_name : short_name</code></pre></div>\n<h4>创建评论代码文档</h4>\n<p>在 <code class=\"language-text\">_includes</code> 文件夹下新建 <code class=\"language-text\">duoshuo.html</code>,这个文档中添加我们配置好的代码，目的是创建评论代码文档。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>comments<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ds-thread<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">{%</span> <span class=\"token attr-name\">if</span> <span class=\"token attr-name\">page.id</span> <span class=\"token attr-name\">%}data-thread-key</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{{ page.id }}<span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\">{%</span> <span class=\"token attr-name\">endif</span> <span class=\"token attr-name\">%}</span>  <span class=\"token attr-name\">data-title</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">var</span> duoshuoQuery <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>short_name<span class=\"token operator\">:</span><span class=\"token string\">\"short_name\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> ds <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        ds<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'text/javascript'</span><span class=\"token punctuation\">;</span>ds<span class=\"token punctuation\">.</span>async <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        ds<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>protocol <span class=\"token operator\">==</span> <span class=\"token string\">'https:'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'https:'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'http:'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'//static.duoshuo.com/embed.js'</span><span class=\"token punctuation\">;</span>\n        ds<span class=\"token punctuation\">.</span>charset <span class=\"token operator\">=</span> <span class=\"token string\">'UTF-8'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'head'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n         <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h4>将评论加入 post.html</h4>\n<p>最后是修改 post.html 文章页（或其它需要出现评论的页面），在文档恰当地方加入下面这句代码来显示评论。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{% include duoshuo.html %}</code></pre></div>\n<h3>修改评论样式</h3>\n<p>多说可以修改评论框的样式，实现起来很方便，我们可以直接在自己的多说的后台管理中设置。</p>\n<p>打开<code class=\"language-text\">后台管理</code>—><code class=\"language-text\">设置</code>—><code class=\"language-text\">基本设置</code>选择你喜欢的样式，简单的选择还是满足不了你的话，看<code class=\"language-text\">自定义CSS</code>这一项：</p>\n<p>例如：我们想让最下面的那行<code class=\"language-text\">某某某正在使用多说</code>消失。就在自定义CSS中添加下面的代码：</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">#ds-reset .ds-powered-by</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>当然这段代码你可以填写到自己的CSS文件中。</p>","frontmatter":{"title":"给 Jekyll 添加评论插件","date":"October 02, 2015"},"fields":{"slug":"/2015-10-02-add-duoting-for-jekyll/"}}},"pageContext":{"slug":"/2015-10-02-add-duoting-for-jekyll/","previous":{"fields":{"slug":"/2015-10-01-HTTP/"},"frontmatter":{"title":"学习HTTP协议","tags":null}},"next":{"fields":{"slug":"/2015-10-16-how-to-use-jQuery-Hotkeys/"},"frontmatter":{"title":"jQuery插件:jQuery Hotkeys","tags":null}}}}}