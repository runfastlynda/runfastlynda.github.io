{"componentChunkName":"component---src-templates-blog-post-js","path":"/2015-08-26-collapsing-margins/","result":{"data":{"site":{"siteMetadata":{"title":"runfastlynda"}},"markdownRemark":{"id":"9bc9a978-372a-5947-8135-cd1b9a2dc9d4","excerpt":"经常遇到Collapsing Margins，也就是margin折叠的情况，可总是不知道哪里出现了问题。\n那就让我们来探讨下这个 margin 折叠 到底是什么鬼？它们是如何影响页面上的元素的？我们该如何拿下它？ margin折叠是什么？ 在W3C规范是这样定义margin折叠的：相邻的…","html":"<p>经常遇到Collapsing Margins，也就是margin折叠的情况，可总是不知道哪里出现了问题。\n那就让我们来探讨下这个 margin 折叠 到底是什么鬼？它们是如何影响页面上的元素的？我们该如何拿下它？</p>\n<h3>margin折叠是什么？</h3>\n<p>在W3C规范是这样定义margin折叠的：相邻的2个或多个盒子排列时会形成一个单一的margin。\n也就是说，当两个元素的垂直边缘是相接触的，只有拥有大的margin的元素的margin将被实现，\n而margin较小的元素的margin将被折叠到零。</p>\n<p>如果两者均为负，则使用那个大的的负值做margin。当然这个定义适用于相邻元素和嵌套元素。</p>\n<h5>相邻元素之间的margin折叠。</h5>\n<p>简单来说，这意味着在正常文档流中相邻的垂直块级元素，相比之下最大的margin值将被认可为的元素的margin，而具有较小的margin的元素的margin将被折叠到零。</p>\n<p>例如，</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>a<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        A\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>b<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        B\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>A有一个25px的底部margin而在它下面的B有一个20px的顶部margin</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">    <span class=\"token selector\">.a</span><span class=\"token punctuation\">{</span>\n      <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 25px<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token selector\">.b</span><span class=\"token punctuation\">{</span>\n      <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>那么此时只有25像素的底部margin会被执行，两个元素之间的距离是25px，而不是预想中的45px（25+20）。</p>\n<p>到目前为止，我们只讨论了相邻元素的margin 折叠效应，但同样的事情对于父元素和子元素也是成立的。包括有几个子元素（即嵌套元素）的时候。</p>\n<p>例如:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>a<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        A\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>b<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n          B\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>CSS部分</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">    <span class=\"token selector\">.a</span><span class=\"token punctuation\">{</span>\n      <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> 25px<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token selector\">.b</span><span class=\"token punctuation\">{</span>\n      <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>A，B的顶部margin此时是25px，而不是45px。</p>\n<h3>特殊情况</h3>\n<p>有一种情况，会导致结果和margin折叠的行为不一致：当一个元素拥有负margin，相邻元素拥有正的margin时，\n两个元素之间的距离将是正负margin相加在一起得到的值。</p>\n<p>例如：</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>a<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        A\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>b<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        B\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>CSS部分：</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">    <span class=\"token selector\">.a</span><span class=\"token punctuation\">{</span>\n      <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> -25px<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token selector\">.b</span><span class=\"token punctuation\">{</span>\n      <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>此时A，B之间的距离是-5px.</p>\n<h3>什么情况可以阻止margin折叠</h3>\n<p>如果我们简单地给div元素添加一个边框，我们可以阻止margin折叠，\n当我们不想要一个可见的顶部边框的设计时，那么给div元素添加padding-top：1px 会取得同样的效果。\n同样，如果将overflow属性添加除visible以外的值，同样的效果也会发生。</p>\n<p>注意，border和padding都应适用于父元素，给子元素添加border不会阻止margin折叠，因为子元素的margin此处是在border的外边。</p>","frontmatter":{"title":"说说Collapsing Margins","date":"August 26, 2015"},"fields":{"slug":"/2015-08-26-collapsing-margins/"}}},"pageContext":{"slug":"/2015-08-26-collapsing-margins/","previous":{"fields":{"slug":"/2015-08-26-read-source-code-of-2048-5/"},"frontmatter":{"title":"2048源代码解读（5）","tags":["源码阅读"]}},"next":{"fields":{"slug":"/2015-08-28-css-responsive-navigation-menu/"},"frontmatter":{"title":"用CSS设计响应式导航菜单","tags":["CSS"]}}}}}